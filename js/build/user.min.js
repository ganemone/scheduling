function cancelCoverRequest(){coverRequest=!1,$(".top-right").remove(),$("body").append("<div class='notifications top-right'></div>")}function setDate(a){selectedDate=new Date(a)}function incrementDate(){selectedDate=new Date(selectedDate.getFullYear(),selectedDate.getMonth(),selectedDate.getDate()+1,0,0,0),$("#calendar").fullCalendar("select",selectedDate,selectedDate,"true")}function customEvent(a,b){var c="<div>"+$("#customTimes").html()+"</div>",d={title:"Custom Event",buttons:{Submit:1,Cancel:2},submit:function(c,d,e,f){if(1==d){var g=f.start,h=f.end,i=new Date(a.getFullYear(),a.getMonth(),a.getDate()-1,g[0],g[1],g[2]),j=new Date(a.getFullYear(),a.getMonth(),a.getDate()-1,h[0],h[1],h[2]);i>=j?alert("The end of your availability must come after the start"):updateEvent("Custom",a,!1,g,h),b===!0&&incrementDate()}return!0}};$.prompt(c,d)}function initializeForm(a,b){var c="<form id='customTimes'>Start: <select id='start'>",d="",e=[];e["06:00:00"]="6:00am",e["06:15:00"]="6:15am",e["06:30:00"]="6:30am",e["06:45:00"]="6:45am",e["07:00:00"]="7:00am",e["07:15:00"]="7:15am",e["07:30:00"]="7:30am",e["07:45:00"]="7:45am",e["08:00:00"]="8:00am",e["08:15:00"]="8:15am",e["08:30:00"]="8:30am",e["08:45:00"]="8:45am",e["09:00:00"]="9:00am",e["09:15:00"]="9:15am",e["09:30:00"]="9:30am",e["09:45:00"]="9:45am",e["10:00:00"]="10:00am",e["10:15:00"]="10:15am",e["10:30:00"]="10:30am",e["10:45:00"]="10:45am",e["11:00:00"]="11:00am",e["11:15:00"]="11:15am",e["11:30:00"]="11:30am",e["11:45:00"]="11:45am",e["12:00:00"]="12:00pm",e["12:15:00"]="12:15pm",e["12:30:00"]="12:30pm",e["12:45:00"]="12:45pm",e["13:00:00"]="1:00pm",e["13:15:00"]="1:15pm",e["13:30:00"]="1:30pm",e["13:45:00"]="1:45pm",e["14:00:00"]="2:00pm",e["14:15:00"]="2:15pm",e["14:30:00"]="2:30pm",e["14:45:00"]="2:45pm",e["15:00:00"]="3:00pm",e["15:15:00"]="3:15pm",e["15:30:00"]="3:30pm",e["15:45:00"]="3:45pm",e["16:00:00"]="4:00pm",e["16:15:00"]="4:15pm",e["16:30:00"]="4:30pm",e["16:45:00"]="4:45pm",e["17:00:00"]="5:00pm",e["17:15:00"]="5:15pm",e["17:30:00"]="5:30pm",e["17:45:00"]="5:45pm",e["18:00:00"]="6:00pm",e["18:15:00"]="6:15pm",e["18:30:00"]="6:30pm",e["18:45:00"]="6:45pm",e["19:00:00"]="7:00pm",e["19:15:00"]="7:15pm",e["19:30:00"]="7:30pm",e["19:45:00"]="7:45pm",e["20:00:00"]="8:00pm",e["20:15:00"]="8:15pm",e["20:30:00"]="8:30pm",e["20:45:00"]="8:45pm",e["21:00:00"]="9:00pm";for(var f=a.split(":"),g=b.split(":"),h=Number(f[0]),i=Number(f[1])>0?Number(f[1])/15:0,j=Number(g[0]),k=Number(g[1])>0?Number(g[1])/15:0,l=4*(j-h)-i+k,m=0;l>m;m++)d+="<option value='"+a+"'>"+e[a]+"</option>",f=a.split(":"),a="45"==f[1]?Number(f[0])+1+":00:00":f[0]+":"+(Number(f[1])+15)+":"+f[2],a.length<8&&(a="0"+a);return c+=d+"</select>"+"<br>End: <select id='end'>"+d+"</select></form>"}function showClass(a){$(a).each(function(){$(this).show()})}function hideClass(a){$(a).each(function(){$(this).hide()})}function updateEvent(a,b,c,d,e){if(d>e)return alert("The end time must come before the start"),void 0;var f=b.getMonth()+1,g=b.getDate(),h=b.getFullYear(),i=h+"-"+f+"-"+g;$("#start").each(function(){$(this).removeAttr("disabled")}),$("#end").each(function(){$(this).removeAttr("disabled")}),sendRequest("POST",url+"index.php/user/updateHourAction",{employeeId:employeeId,day:i,available:a,begin:d,end:e},function(a){$("#calendar").fullCalendar("removeEvents",a),$("#calendar").fullCalendar("refetchEvents")},!0)}function pickUpEmptyShift(a,b,c){b="undefined"==typeof b?a.start.toTimeString().split(" ")[0]:b,c="undefined"==typeof c?a.end.toTimeString().split(" ")[0]:c,sendRequest("GET",url+"index.php/user/pickUpEmptyShift",{employeeId:employeeId,start:b,end:c,date:a.start.toDateString(),position:a.position,sfl:a.sfl,shiftId:a.shiftId},function(a){a=jQuery.parseJSON(a),"false"==a[0]?alert(a[1]):$("#calendar").fullCalendar("refetchEvents")},!0)}function deletePost(a){setTimeout(function(){$(".jqibox").css("height",$(document).height()),$(".jqifade").css("height",$(document).height())},20),$.prompt("Are you sure you would like to delete this post?",{title:"Confirmation",buttons:{Yes:1,Cancel:2},submit:function(b,c){return 1==c&&$.ajax({type:"GET",url:url+"index.php/news/deletePost",data:{messageId:a},success:function(){$("#message"+a).hide(),successMessage("Message Deleted")},error:function(a,b,c){error_handler(b,c,"deletePost errorThrown")}}),!0}})}function updatePost(a){var b=$("#message"+a+" textarea").val();$.ajax({type:"GET",url:url+"index.php/news/updateNewsfeedPost",data:{employeeId:employeeId,messageId:a,message:b},success:function(a){"false"==a?errorMessage("Whoops, an error Occurred... Please try again or go get G."):successMessage("Successfully updated this post.")},error:function(a,b){error_handler(b,errorthrown,"updateNewsfeedPost")}})}function addNewPost(){var a=$("#newPostTextArea").val();$.ajax({type:"GET",url:url+"index.php/news/addNewsfeedPost",data:{employeeId:employeeId,message:a},success:function(){reloadNewsfeed()},error:function(a,b,c){error_handler(b,c,"addNewsfeedPost")}})}function reloadNewsfeed(){$.ajax({type:"GET",url:url+"index.php/news/reloadNewsfeed",success:function(a){$("#newsfeed").replaceWith(a)},error:function(a,b,c){error_handler(b,c,"reloadNewsfeed")}})}function getStartAndEndDates(a,b){var c,d,e="";return"agendaWeek"==a||"basicWeek"==a?(c=new Date(b.getFullYear(),b.getMonth(),b.getDate()-b.getDay()),d=new Date(c.getFullYear(),c.getMonth(),c.getDate()+6),e={startDate:c,endDate:d}):"month"==a?(c=new Date(b.getFullYear(),b.getMonth(),1),d=new Date(c.getFullYear(),c.getMonth()+1,0),e={startDate:c,endDate:d}):("agendaDay"==a||"basicDay"==a)&&(e={startDate:b,endDate:b}),e}function copyWeek(){var a=$("#calendar").fullCalendar("getDate"),b=getStartAndEndDates("agendaWeek",a);if(1==availability){var c=$("#calendar").fullCalendar("clientEvents",function(a){return a.start<b.startDate||a.start>b.endDate||"availability"!=a.category?!1:!0});clipboard=c,clipboard.length>0?successMessage("Copied Week"):(errorMessage("There are no events here to copy"),clipboard=null)}else errorMessage("Availability events must be on to copy the week")}function pasteWeek(){var a=$("#calendar").fullCalendar("getDate"),b=getStartAndEndDates("agendaWeek",a);if(null===clipboard)return errorMessage("You must copy a week first! In the week view, click the 'Copy Week' button in the vertical menu on the left side of the screen"),!1;var c=new Array;$.each(clipboard,function(a,b){var d=null===b.end?null:b.end.toTimeString().split(" ")[0],e=b.allDay===!0?b.title:"Custom",f={day:b.start.getDay(),start:b.start.toTimeString().split(" ")[0],end:d,available:e,employeeId:employeeId};c.push(f)}),$.ajax({type:"POST",url:url+"index.php/user/pasteWeek",data:{week_start:b.startDate,week_end:b.endDate,week:JSON.stringify(c)},success:function(a){console.log(a),successMessage("Pasted Week"),$("#calendar").fullCalendar("refetchEvents")},error:function(a){console.log(a),errorMessage("An error occurred")}})}function validateDownloadForm(a){if(!a.start)return new Array(!1,"The Start Date Field is Required");if(!a.end)return new Array(!1,"The End Date Field is Required");var b,c;b=a.start.split("-"),c=a.end.split("-");var d=new RegExp("[^0-9-]");return d.test(a.start)?new Array(!1,"Please do not include any characters other than numbers and dashes in the start date."):d.test(a.end)?new Array(!1,"Please do not include any characters other than numbers and dashes in the end date."):3!=b.length||4!=b[0].length||2!=b[1].length||2!=b[2].length?new Array(!1,"Please enter the start date with the following format: YYYY-MM-DD"):3!=c.length||4!=c[0].length||2!=c[1].length||2!=c[2].length?new Array(!1,"Please enter the end date with the following format: YYYY-MM-DD"):b[1]>12||b[2]>31?new Array(!1,"Please enter a valid start date."):c[1]>12||c[1]>31?new Array(!1,"Please enter a valid end date."):c[0]<b[0]||c[1]<b[1]||c[0]==b[0]&&c[1]==b[1]&&c[2]<b[2]?new Array(!1,"The end date must come after the start date"):new Array(!0)}function validateEmpty(a){return null===a||a===!1||""===a?!1:!0}function validateDate(a){var b=new RegExp("[^0-9-]"),c=a.split("-");return b.test(a)||3!=c.length||10!=a.length||4!=c[0].length||2!=c[1].length||2!=c[2].length||c[1]>12||c[1]<1||c[2]>31||c[2]<1?!1:!0}function validateStartEndDates(a,b){var c,d;return validateDate(a)===!1||validateDate(b)===!1?new Array(!1,"Please enter valid dates"):(c=a.split("-"),d=b.split("-"),c[0]>d[0]||c[1]>d[1]||c[1]==d[1]&&c[2]>d[2]?new Array(!1,"The start date must come after the end date"):new Array(!0))}function isLockedOut(a){var b=new Date;return b.setDate(1),b.setMonth(b.getMonth()+0),b>a?!0:!1}function updateInfo(){var a="<div id='monthInfo'><form class='form-inline'><fieldset><div class='form-group text-left'><label for='minHours'>Min Weekly Hours: </label><input type='text' name='min' class='form-control' id='minHours' value='"+monthInfo.minHours+"'>"+"</div>"+"<div class='form-group text-left'>"+"<label for='maxHours'>Max Weekly Hours: </label>"+"<input type='text' name='max' class='form-control' id='maxHours' value='"+monthInfo.maxHours+"'>"+"</div>"+"<div class='form-group text-left'>"+"<textarea cols='40' rows='5' name='notes' id='notes' placeholder='Enter Notes for this month here...'>"+monthInfo.notes+"</textarea>"+"</div>"+"</fieldset>"+"</form>"+"</div>";bootbox.confirm(a,function(a){a===!0&&$.ajax({type:"POST",url:url+"index.php/user/updateMonthInfo",data:{date:$("#calendar").fullCalendar("getDate"),employeeId:employeeId,min:$("#minHours").val(),max:$("#maxHours").val(),notes:$("#notes").val()},success:function(){successMessage("Your information has been updated")},error:function(a,b,c){error_handler(b,c,"pickUpEmptyShift")}})})}function partialShiftPickupDialog(a,b,c){bootbox.confirm(c,function(c){c===!0&&pickUpShift($("#start").val(),$("#end").val(),b,a.employeeId,a.id)})}function pickUpShift(a,b,c,d,e){return a>b?(alert("The end time must come before the start"),void 0):(null===a||null===b?$.ajax({type:"POST",url:url+"index.php/user/shiftSwap",data:{employeeId:c,originalEmployeeId:d,eventId:e},success:function(a){a=jQuery.parseJSON(a),"false"==a[0]?errorMessage(a[1]):($("#calendar").fullCalendar("refetchEvents"),successMessage("You successfully picked up this shift."))},error:function(a,b,c){error_handler(b,c,"shiftSwap")}}):$.ajax({type:"POST",url:url+"index.php/user/partialShiftSwap",data:{start:a,end:b,employeeId:c,originalEmployeeId:d,eventId:e},success:function(a){a=jQuery.parseJSON(a),"false"==a[0]?errorMessage(a[1]):(successMessage("You successfully picked up part of this shift."),$("#calendar").fullCalendar("refetchEvents"))},error:function(a,b,c){error_handler(b,c,"partialShiftSwap")}}),void 0)}function fullShiftCoverRequest(a){$.ajax({type:"POST",url:url+"index.php/user/scheduleRequest",data:{shiftId:a.id},success:function(a){0===a?errorMessage("This shift is already up for cover"):($("#calendar").fullCalendar("refetchEvents"),successMessage("You have successfully put this shift up for cover"))},error:function(a,b,c){error_handler(b,c,"scheduleRequest")}})}function partialShiftCoverRequest(a){var b,c,d,e;b=a.start.toTimeString().split(" ")[0],c=a.end.toTimeString().split(" ")[0],e=initializeForm(b,c),bootbox.confirm(e,function(e){if(e===!0){if(b=$("#start").val(),c=$("#end").val(),d=a.id,b>c)return errorMessage("The start must come before the end"),!1;$.ajax({type:"POST",url:url+"index.php/user/requestPartialShiftCover",data:{requestStart:b,requestEnd:c,employeeId:employeeId,shiftId:d},success:function(){successMessage("Your shift is up for cover."),$("#calendar").fullCalendar("refetchEvents")},error:function(a,b,c){error_handler(b,c,"requestPartialShiftCover")}})}})}bootbox.animate(!1);var monthInfo={minHours:null,maxHours:null,notes:null};$("#calendar").fullCalendar({header:{left:"prev,next today",center:"title",right:"month,agendaWeek,agendaDay"},editable:!0,droppable:!0,draggable:!0,minTime:8,maxTime:21,dropAccept:".external-event, .fc-event",loading:function(a){a?$("#loading").show():$("#loading").fadeOut()},selectable:!0,selectHelper:!0,snapMinutes:15,timeFormat:{"":"h:mm{ - h:mm}"},eventResize:function(a,b){return b>0?0:(updateEvent("Custom",a.start,!1,a.start.toTimeString().split(" ")[0],a.end.toTimeString().split(" ")[0]),void 0)},select:function(a,b,c,d,e){isLockedOut(a)?($("#calendar").fullCalendar("unselect"),selectedDate=null,bootbox.alert("It is too late to update your availability on this day. Please contact Tim Martin at tmartin@gazellesports.com")):c===!0||"month"==e.name?setDate(a):(updateEvent("Custom",a,!1,a.toTimeString().split(" ")[0],b.toTimeString().split(" ")[0]),$("#calendar").fullCalendar("unselect"))},eventRender:function(a,b){var c;switch(a.start.getDay()){case 6:c="left";break;case 0:c="right";break;default:c="top"}b.tooltip({animation:!1,title:a.tip,container:"body",placement:c}),"scheduled"==a.category&&(a.editable=!1)},viewDisplay:function(a){"agendaWeek"==a.name?($("#copyWeek").removeClass("disabled"),$("#pasteWeek").removeClass("disabled")):($("#copyWeek").addClass("disabled","disabled"),$("#pasteWeek").addClass("disabled","disabled"));var b=a.start.getFullYear()+"-"+(a.start.getMonth()+1);$.ajax({type:"POST",url:url+"index.php/user/populateMonthInfoForm",data:{employeeId:employeeId,month:b},success:function(a){var b=JSON.parse(a);monthInfo.minHours="undefined"!=typeof b.minHours?b.minHours:"",monthInfo.maxHours="undefined"!=typeof b.maxHours?b.maxHours:"",monthInfo.notes="undefined"!=typeof b.notes?b.notes:""},error:function(){alert("ERROR!!!")}})},drop:function(a){var b=$(this).data("eventObject");isLockedOut(a)?bootbox.alert("It is too late to update your availability on this day. Please contact Tim Martin at tmartin@gazellesports.com"):"Custom"==b.title?customEvent(a,!1):updateEvent(b.title,a,!0,"","")},eventDrop:function(a,b,c,d,e){var f,g,h,i,j;isLockedOut(a.start)||"availability"!=a.category?"availability"==a.category&&bootbox.alert("It is too late to update your availability on this day. Please contact Tim Martin at tmartin@gazellesports.com"):(g=a.start,h=new Date(g.getFullYear(),g.getMonth(),g.getDate(),g.getHours(),g.getMinutes(),0),a.allDay?a.category&&(g=a.start,f={title:a.title,start:new Date(g.getFullYear(),g.getMonth(),g.getDate(),g.getHours(),g.getMinutes(),0),color:a.color,allDay:!0},updateEvent(f.title,g,!0,"","")):(i=a.end,j=new Date(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),0),f={title:a.title,start:h,end:j,color:a.color,allDay:!1},updateEvent("Custom",h,!1,h.toTimeString().split(" ")[0],j.toTimeString().split(" ")[0])),$("#calendar").fullCalendar("renderEvent",f)),e()},eventClick:function(a){console.log(a);var b,c;if("scheduled-cover"==a.category||"scheduled-pickup"==a.category&&coverRequest===!1||"emptyShifts"==a.category){b=a.start.toTimeString().split(" ")[0],c=a.end.toTimeString().split(" ")[0];var d=initializeForm(b,c);bootbox.dialog(a.description,[{label:"Partial Shift","class":"btn-primary",callback:function(){partialShiftPickupDialog(a,employeeId,d)}},{label:"Entire Shift","class":"btn-primary",callback:function(){pickUpShift(null,null,employeeId,a.employeeId,a.id)}},{label:"Cancel","class":"btn-danger"}])}coverRequest===!0&&"scheduled"==a.category&&(coverRequest=!1,cancelCoverRequest(),bootbox.dialog("Are you sure you would like to request a cover for this shift? (Note: the shift will remain on your schedule, and you will still be responsible for it until someone claims it). ",[{label:"Full Shift","class":"btn-primary",callback:function(){fullShiftCoverRequest(a)}},{label:"Partial Shift","class":"btn-primary",callback:function(){partialShiftCoverRequest(a)}},{label:"Cancel","class":"btn-danger"}]))},eventSources:[{url:url+"index.php/user/scheduledEventSource",error:function(a,b,c){alert(c)}},{url:url+"index.php/user/availabilityEventSource",error:function(a,b,c){alert(c)}}]}),$(".leftNav #external-events div.external-event").each(function(){var a={title:$.trim($(this).text())};$(this).data("eventObject",a),$(this).draggable({zIndex:999,revert:!0,revertDuration:0})}),$("#submitMonthForm").click(function(){var a=$("#calendar").fullCalendar("getDate"),b=employeeId,c=$("#minHours").val(),d=$("#maxHours").val(),e=$("#notes").val();$.ajax({type:"POST",url:url+"index.php/user/updateMonthInfo",data:{employeeId:b,date:a.toDateString(),min:c,max:d,notes:e},success:function(){$("#monthInfo").slideUp(),showClass(".mainButton")}})}),$("#coverRequest").click(function(){coverRequest=!0,$(".top-right").notify({type:"bangTidy",message:{html:"Click on a shift to put it up for cover <button onclick='cancelCoverRequest()' class='btn btn-small btn-primary'>Cancel</button>"},closable:!1,fadeOut:{enabled:!1},onClose:function(){coverRequest=!1}}).show()}),$("#showMonthInfoForm").click(function(){updateInfo()}),$("#cancelMonthForm").click(function(){}),$("#tutorial").click(function(){$.prompt(tutorialStates)}),$("#showEvents").click(function(){events===!0?($("#calendar").fullCalendar("removeEventSource",url+"index.php/user/coEventSource"),events=!1):($("#calendar").fullCalendar("addEventSource",url+"index.php/user/coEventSource"),events=!0)}),$("#showAllStaff").click(function(){staff===!0?($("#calendar").fullCalendar("removeEventSource",url+"index.php/user/allStaffSource"),staff=!1):($("#calendar").fullCalendar("addEventSource",url+"index.php/user/allStaffSource"),staff=!0)}),$("#toggleAvailability").click(function(){1==availability?($("#calendar").fullCalendar("removeEventSource",url+"index.php/user/availabilityEventSource"),availability=!1):($("#calendar").fullCalendar("addEventSource",url+"index.php/user/availabilityEventSource"),availability=!0)}),$("#printableSchedule").click(function(){window.location=url+"index.php/user/printable?events="+!events+"&availability="+availability+"&staff="+!staff}),$(window).load(function(){availability===!0&&$("#calendar").fullCalendar("addEventSource",url+"index.php/user/availabilityEventSource"),staff===!0&&$("#calendar").fullCalendar("addEventSource",url+"index.php/user/allStaffSource"),events===!0&&$("#calendar").fullCalendar("addEventSource",url+"index.php/user/coEventSource"),-1==String(window.location).indexOf("printable")?$(".leftNav").css("height",$(window).height()-40):$(".leftNav").hide()}),$("#downloadCalendar").click(function(){var a="<div style='width: 300px'><form class='form-inline' action='<? echo base_url() ?>index.php/ics' method='get'><fieldset><div class='form-group text-left'><label for='startDatePicker'>Start Date: </label><input type='text' name='start' class='form-control' id='startDatePicker' placeholder='YYYY-MM-DD'/></div><div class='form-group text-left'><label for='endDatePicker'>End Date: </label><input type='text' name='end' class='form-control' id='endDatePicker' placeholder='YYYY-MM-DD' /></div><input type='hidden' value='<? echo $employeeId ?>' name='employeeId' /><div class='form-group text-left'><div class='checkbox'><label for='events'><input type='checkbox' name='events' id='events' />Include Store Events</label></div></div><div class='form-group text-left'><div class='checkbox'><label for='google'><input type='checkbox' name='google' id='google' />Google Calendar Format</label></div></div>";bootbox.confirm(a,function(a){if(a===!0){if($empty_start_check=validateEmpty($("#startDatePicker").val()),$empty_end_check=validateEmpty($("#endDatePicker").val()),$empty_start_check&&$empty_end_check){if($valid_date_arr=validateStartEndDates($("#startDatePicker").val(),$("#endDatePicker").val()),$valid_date_arr[0]===!0){var b=$("#startDatePicker").val(),c=$("#endDatePicker").val(),d=$("#events").is(":checked")?"on":"off",e=$("#google").is(":checked")?"on":"off",f=url+"index.php/ics?start="+b+"&end="+c+"&employeeId="+employeeId+"&google="+d+"&events="+e;return window.location=f,!0}alert($valid_date_arr[1])}else alert("Please enter start and end dates");return!1}})}),$(document).keypress(function(a){if(!($(a.target).is("input")||$(a.target).is("select")||$(a.target).is("textarea"))){var b=a.keyCode?a.keyCode:a.which;if(null!=selectedDate)if(97==b||65==b)updateEvent("Available",selectedDate,!0,"",""),incrementDate();else if(98==b||66==b)updateEvent("Busy",selectedDate,!0,"",""),incrementDate();else if(99==b||67==b)customEvent(selectedDate,!0);else if(37==b){var c=new Date(selectedDate.getFullYear(),selectedDate.getMonth(),selectedDate.getDate()-1,0,0,0);setDate(c),$("#calendar").fullCalendar("select",selectedDate,selectedDate,!0),a.preventDefault()}else if(39==b){var c=new Date(selectedDate.getFullYear(),selectedDate.getMonth(),selectedDate.getDate()+1,0,0,0);setDate(c),$("#calendar").fullCalendar("select",selectedDate,selectedDate,!0),a.preventDefault()}else if(38==b){var c=new Date(selectedDate.getFullYear(),selectedDate.getMonth(),selectedDate.getDate()-7,0,0,0);setDate(c),$("#calendar").fullCalendar("select",selectedDate,selectedDate,!0),a.preventDefault()}else if(40==b){var c=new Date(selectedDate.getFullYear(),selectedDate.getMonth(),selectedDate.getDate()+7,0,0,0);setDate(c),$("#calendar").fullCalendar("select",selectedDate,selectedDate,!0),a.preventDefault()}}});var tutorialSubmit=function(a,b){return-1===b?($.prompt.prevState(),$(".jqibox").css("height",$(document).height()),$(".jqifade").css("height",$(document).height()),!1):1===b?($.prompt.nextState(),$(".jqibox").css("height",$(document).height()),$(".jqifade").css("height",$(document).height()),!1):void 0},tutorialStates=[{title:"Welcome",html:"Would you like to take a tutorial of the scheduling software?",buttons:{Sure:1},focus:1,position:{container:"#container",x:0,y:0,width:300},submit:tutorialSubmit},{title:"Menu",html:'Here is your menu bar.  It contains useful buttons like "Logout".',buttons:{Prev:-1,Next:1},position:{container:"#menu",x:-300,y:0,width:300,arrow:"rt"},submit:tutorialSubmit},{title:"Toolbar",html:'This list of buttons determines how to enter availability.  Click "Update Info" to update hours per week and specific notes for the given month.',buttons:{Prev:-1,Next:1},position:{container:"#buttons2",x:230,y:5,width:300,arrow:"lt"},submit:function(a,b){return-1===b?($.prompt.prevState(),$(".jqibox").css("height",$(document).height()),$(".jqifade").css("height",$(document).height()),!1):1===b?($.prompt.nextState(),$("#showDraggable").trigger("click"),$("#external-events").css("backgroundColor","white"),$("#external-events").effect("highlight",{color:"#7FFF00"},500),$("#external-events").effect("highlight",{color:"#7FFF00"},500),$("#external-events").effect("highlight",{color:"#7FFF00"},5e3),$(".jqibox").css("height",$(document).height()),$(".jqifade").css("height",$(document).height()),!1):void 0}},{title:"Drag and Drop",html:'Clicking drag events will allow you to drag an available option to any day still able to be edited from the box shown below labeled "Draggable Events".',buttons:{Prev:-1,Next:1},position:{container:"#buttons",x:158,y:30,width:300,arrow:"lt"},submit:function(a,b){return $("#showDraggable").trigger("click"),-1===b?($.prompt.prevState(),$(".jqibox").css("height",$(document).height()),$(".jqifade").css("height",$(document).height()),!1):1===b?($.prompt.nextState(),$(".jqibox").css("height",$(document).height()),$(".jqifade").css("height",$(document).height()),!1):void 0}},{title:"Color Code",html:"This shows a color code of all the different types of events. If you are unsure of the purpose of a certain event, simply hover the mouse over the event for a description.",buttons:{Prev:-1,Next:1},position:{container:"#buttons",x:158,y:50,width:300,arrow:"lt"},submit:function(a,b,c,d){return 1==b&&$("#calendar").fullCalendar("changeView","agendaWeek"),tutorialSubmit(a,b,c,d)}},{title:"Copy Week",html:"This feature is only available when in the week view.  Once a week is copied, it can be pasted into any other week. Think of this functionality to be similar to copying text in a document.",buttons:{Prev:-1,Next:1},position:{container:"#buttons",x:158,y:75,width:300,arrow:"lt"},submit:function(a,b,c,d){return $("#calendar").fullCalendar("changeView","month"),tutorialSubmit(a,b,c,d)}},{title:"Shift Cover",html:"This button allows for putting shifts up for cover.  When a shift is up for cover, other employees will see it on their calendars, and will be able to pick up the shift.",buttons:{Prev:-1,Next:1},position:{container:"#buttons",x:158,y:124,width:300,arrow:"lt"},submit:function(a,b,c,d){return 1==b&&$("#newsfeed").show(),tutorialSubmit(a,b,c,d)}},{title:"Newsfeed",html:"This button will show a newsfeed. The newsfeed can be used for any form of staff to staff communication. Managers can post notes here about special circumstance, floor staff can post about shift covers, etc.",buttons:{Prev:-1,Next:1},position:{container:"#buttons",x:158,y:148,width:300,arrow:"lt"},submit:function(a,b,c,d){return $("#newsfeed").hide(),1===b&&$("#showEvents").trigger("click"),tutorialSubmit(a,b,c,d)}},{title:"Store Events",html:"This button will toggle the visibility of store events, shown as purple events on the calendar.",buttons:{Prev:-1,Next:1},position:{container:"#buttons2",x:230,y:5,width:300,arrow:"lt"},submit:function(a,b){return $("#showEvents").trigger("click"),events=!0,-1===b?($.prompt.prevState(),$(".jqibox").css("height",$(document).height()),$(".jqifade").css("height",$(document).height()),!1):1===b?($("#showEvents").trigger("click"),events=!1,$.prompt.nextState(),$(".jqibox").css("height",$(document).height()),$(".jqifade").css("height",$(document).height()),!1):void 0}},{title:"All Staff ",html:"This button allows you to view the entire staff's schedules.",buttons:{Prev:-1,Next:1},position:{container:"#buttons2",x:230,y:30,width:300,arrow:"lt"},submit:function(a,b){return-1===b?($("#showEvents").trigger("click"),$.prompt.prevState(),$(".jqibox").css("height",$(document).height()),$(".jqifade").css("height",$(document).height()),!1):1===b?($.prompt.nextState(),$(".jqibox").css("height",$(document).height()),$(".jqifade").css("height",$(document).height()),!1):void 0}},{title:"Toggle Availability",html:"This button allows you to control whether your availability events are shown on the calendar. It would be useful to remove your availability when printing your schedule.",buttons:{Prev:-1,Next:1},position:{container:"#buttons2",x:230,y:50,width:300,arrow:"lt"},submit:tutorialSubmit},{title:"Download Calendar",html:"The calendar can be downloaded in .ics format.  To add to ICal or Outlook, simply download the file to your computer and open it with the respective calendar application.  You can also import it into google calendar.",buttons:{Prev:-1,Next:1},position:{container:"#buttons2",x:230,y:75,width:300,arrow:"lt"},submit:tutorialSubmit},{title:"Printable Schedule",html:'This button will bring up a printable version of the calendar. It will contain the events that you currently have on the page. If you would only like to see your schedule, be sure to remove your availability by hitting the "Toggle Availability" button.',buttons:{Prev:-1,Next:1},position:{container:"#buttons2",x:230,y:100,width:300,arrow:"lt"},submit:tutorialSubmit},{title:"The End!",html:"You have completed the tutorial. If you have any questions, feel free to email Giancarlo Anemone at ganemone@gmail.com.",buttons:{Done:0},position:{container:"#container",x:0,y:0,width:300},submit:tutorialSubmit}];